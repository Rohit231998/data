# CDC - Social Vulnerability Index

- source: https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html. 

- how to download data: Manual download from source based on years, filters - Year, Geography - US, Geography Type - County.

- type of place: Counties.

- statvars: Demographics, Health

- years: 2010 to 2022

- place_resolution: State places are resolved based on FIPS code in data.

### How to run:
#### Example
`python3 stat_var_processor.py --input_data=/statvar_imports/cdc/social_vulnerability_index/test_data/sample_input/SVI_2022_US_county_data_input.csv --pv_map=/statvar_imports/cdc/social_vulnerability_index/pv_map/SVI_2022_US_county_pvmap.csv --config=/statvar_imports/cdc/social_vulnerability_index/SVI_2022_US_county_metadata.csv --output_path=/statvar_imports/cdc/social_vulnerability_index/test_data/sample_output/`


### Automation

The automated import uses a manifest that does the following:

- Creates a source_files directory

- Copies all latest input CSV files from GCS:

gsutil cp gs://unresolved_mcf/cdc/social_vulnerability_index/latest/input_files/* source_files/

Processes CSVs for the years: 2010, 2014, 2016, 2018, 2020, 2022 using:

- Corresponding pv_map

- Corresponding metadata config

- Outputs to structured output/ directory paths

### Input/Output mapping for import includes:

Cleaned CSVs: output/SVI_<year>_us_county.csv

Template MCFs: output/SVI_<year>_us_county.tmcf